<!DOCTYPE html>
<html>
<head><title>WhatsApp Bot</title></head>
<body>
  <h2>Login Code</h2>
  <input id="phone" placeholder="Enter WhatsApp Number (e.g., 919999999999)" />
  <button onclick="getCode()">Get Code</button>
  <pre id="output"></pre>

  <hr>
  <h2>Send Message / File</h2>
  <form id="msgForm" enctype="multipart/form-data">
    <input name="receiver" placeholder="919999999999" required><br>
    <input name="message" placeholder="Text message"><br>
    <input type="file" name="file"><br>
    <input name="delay" placeholder="Delay (sec)" value="2"><br>
    <button>Send</button>
  </form>

  <script>
    async function getCode() {
      const phone = document.getElementById('phone').value;
      const res = await fetch('/api?phone=' + phone);
      const data = await res.json();
      document.getElementById('output').textContent = JSON.stringify(data, null, 2);
    }

    document.getElementById('msgForm').onsubmit = async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const res = await fetch('/api', { method: 'POST', body: formData });
      const data = await res.json();
      alert(JSON.stringify(data, null, 2));
    }
  </script>
</body>
</html>
