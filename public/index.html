<!DOCTYPE html>
<html>
<head>
  <title>WhatsApp Pair & Send</title>
  <meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/>
  <style>body{font-family:sans-serif;text-align:center;padding:20px;}input,button{margin:10px;width:90%;max-width:300px;padding:10px;font-size:1em;}</style>
</head>
<body>
  <h2>🔐 WhatsApp Pairing</h2>
  <input id="num" placeholder="Number (e.g. 9190XXXX)" />
  <button onclick="pair()">Get Pairing Code</button>
  <p id="out"></p>

  <h2>📤 Send Messages</h2>
  <form id="f" enctype="multipart/form-data">
    <input name="receiver" placeholder="Receiver number with country code" required />
    <input name="delay" placeholder="Delay seconds" />
    <input type="file" name="file" accept=".txt" required />
    <button type="submit">Start</button>
  </form>
<script>
  async function pair(){
    let n = document.getElementById('num').value.trim();
    if(!n) return alert('Enter number');
    let res = await fetch('/api/pair?number='+n);
    let d = await res.json();
    document.getElementById('out').innerText = d.code ? `Code: ${d.code}` : (d.message||d.error);
  }
  document.getElementById('f').onsubmit = async e=>{
    e.preventDefault();
    let u = await fetch('/api/send',{method:'POST',body:new FormData(e.target)});
    let r = await u.json(); alert(r.message||r.error);
  };
</script>
</body>
</html>
